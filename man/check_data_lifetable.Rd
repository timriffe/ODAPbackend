% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/checkers.R
\name{check_data_lifetable}
\alias{check_data_lifetable}
\title{Check consistency of lifetable input data}
\usage{
check_data_lifetable(data)
}
\arguments{
\item{data}{A data frame containing lifetable-related columns. Must include at least one of: \code{nMx}, \code{nlx}, \code{nqx}, \code{npx}, \code{ndx}, or \code{nLx}.
Optionally may contain an \code{Age} column and a grouping column \code{.id}.}
}
\value{
A data frame summarizing validation results for each group. The returned object contains:
\describe{
\item{check}{Name of the validation performed}
\item{message}{Error message if the check fails, otherwise \code{NA}}
\item{pass}{Either \code{"Pass"} or \code{"Fail"}}
\item{.id}{Group identifier}
}
}
\description{
Validates a data frame intended for lifetable reconstruction.
The function checks whether the input contains at least one column that can be used to reconstruct a full lifetable and performs a set of structural and value-based validations.
If no grouping variable \code{.id} is present, one is automatically created with a single level \code{"all"}.
}
\details{
Checks input data for lifetable reconstruction

The function searches for at least one of the following columns (in order of preference):
\itemize{
\item \code{nMx}
\item \code{nlx}
\item \code{nqx}
\item \code{npx}
\item \code{ndx}
\item \code{nLx}
}
The first available column is used for validation checks. The following checks are performed:
\itemize{
\item Numeric type validation
\item Missing value detection
\item Non-negativity constraint
}
If an \code{Age} column is present, additional checks are performed:
\itemize{
\item Age coherence (numeric validity)
\item Redundancy detection
\item Sequential ordering
}
Validation is performed separately for each \code{.id} group.
}
\examples{
library(readr)
fpath       <- system.file("extdata", "single_hmd_spain.csv.gz", package = "ODAPbackend")
data_in     <- read_csv(fpath, col_select = c(-1), show_col_types = FALSE)
data_in$nMx <- data_in$Deaths / data_in$Exposures
data_in     <- data_in[data_in$`.id` == 1, ]
check_data_lifetable(data_in)

}
\seealso{
\code{\link{age2int}},
\code{\link{is_age_coherent}},
\code{\link{is_age_redundant}},
\code{\link{is_age_sequential}}
}
