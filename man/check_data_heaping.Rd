% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/checkers.R
\name{check_data_heaping}
\alias{check_data_heaping}
\title{Check consistency of data for age heaping diagnostics}
\usage{
check_data_heaping(data, X)
}
\arguments{
\item{data}{A data frame containing the variable to be evaluated.
Optionally may contain a grouping column \code{.id}.}

\item{X}{A character string specifying the name of the variable to be checked (e.g., \code{"Deaths"}).}
}
\value{
A data frame summarizing validation results for each group.
The returned object contains:
\describe{
\item{check}{Name of the validation performed}
\item{message}{Error message if the check fails, otherwise \code{NA}}
\item{pass}{Either \code{"Pass"} or \code{"Fail"}}
\item{.id}{Group identifier}
}
}
\description{
Validates a data frame prior to performing age heaping analysis.
The function checks whether a specified variable contains valid numeric values and ensures that required structural conditions are satisfied.
If a grouping variable \code{.id} is not present, one is automatically created with a single level \code{"all"}.
Validation is performed separately for each \code{.id} group.
}
\details{
Validate input data for age heaping analysis

For the selected variable \code{X}, the following checks are performed:
\itemize{
\item Numeric type validation
\item Missing value detection
\item Infinite value detection
\item Strict positivity constraint (all values must be > 0)
\item Presence of an \code{Age} column (required for age heaping analysis)
}
Each validation is conducted within levels of \code{.id}.
}
\examples{
library(readr)
fpath       <- system.file("extdata", "single_hmd_spain.csv.gz", package = "ODAPbackend")
data_in     <- read_csv(fpath, col_select = c(-1), show_col_types = FALSE)
data_in     <- data_in[data_in$`.id` == 1, ]
check_data_heaping(data = data_in, X = "Deaths")

}
